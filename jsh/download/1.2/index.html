<!doctype html>
<html>
    <head>
        <title>Downloading JSH 1.2</title>
        <script>
            function getDownloadUrl() {
                const platform = navigator.userAgentData ?
                    navigator.userAgentData.platform : navigator.platform;

                if (/Mac/i.test(platform)) {
                    return 'https://duncap.dev/jsh/download/1.2/macos/jshxmacos.zip';
                } else if (/Win/i.test(platform)) {
                    return 'https://duncap.dev/jsh/download/1.2/windows/jshxwindows.zip';
                } else {
                    return null;
                }
            }

            function downloadAndRedirect() {
                const downloadUrl = getDownloadUrl();

                if (downloadUrl) {
                    // Open the download URL in a new tab
                    window.open(downloadUrl, '_blank');
                    
                    // Redirect the current page to the homepage after starting the download
                    window.location.href = "https://duncap.dev/jsh";
                } else {
                    alert("Your OS is not supported for direct download.");
                    window.location.href = "https://duncap.dev/jsh";
                }
            }
        </script>
    </head>
    <body onload="downloadAndRedirect()">
        <h1>Download will start shortly...</h1>
    </body>
</html>
